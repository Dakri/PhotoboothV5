<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Photobooth</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --zinc-50: #fafafa;
            --zinc-100: #f4f4f5;
            --zinc-300: #d4d4d8;
            --zinc-400: #a1a1aa;
            --zinc-500: #71717a;
            --zinc-600: #52525b;
            --zinc-700: #3f3f46;
            --zinc-800: #27272a;
            --zinc-900: #18181b;
            --zinc-950: #09090b;
            --amber-500: #f59e0b;
            --red-900: #7f1d1d;
        }

        body {
            background-color: var(--zinc-950);
            color: var(--zinc-50);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            -webkit-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ─── Screens ─── */
        .screen {
            position: fixed;
            inset: 0;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .screen.active {
            display: flex;
        }

        /* ─── IDLE SCREEN ─── */
        #screen-idle {
            background: var(--zinc-950);
        }
        #screen-idle .buzzer-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        #screen-idle .buzzer {
            width: 320px;
            height: 320px;
            border-radius: 50%;
            border: 6px solid var(--zinc-400);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        #screen-idle .buzzer:hover {
            border-color: var(--zinc-300);
            background: rgba(39, 39, 42, 0.3);
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
        }
        #screen-idle .buzzer:active {
            transform: scale(0.95);
            border-color: #fff;
        }
        #screen-idle .buzzer svg {
            width: 128px;
            height: 128px;
            color: var(--zinc-300);
        }

        /* ─── COUNTDOWN SCREEN ─── */
        #screen-countdown {
            background: rgba(9, 9, 11, 0.8);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        .countdown-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #countdown-ring {
            position: absolute;
            width: 384px;
            height: 384px;
        }
        #countdown-number {
            font-size: 14rem;
            font-weight: 200;
            line-height: 1;
            font-variant-numeric: tabular-nums;
            letter-spacing: -0.05em;
            color: var(--zinc-100);
            z-index: 1;
            text-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
            margin-top: -16px;
        }
        .ring-bg {
            stroke: var(--zinc-800);
            stroke-width: 3;
        }
        .ring-fg {
            stroke: var(--amber-500);
            stroke-width: 3;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
        }

        /* ─── CAPTURING SCREEN ─── */
        #screen-capturing {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .capturing-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 40px;
        }
        .capture-spinner {
            width: 64px;
            height: 64px;
            border: 6px solid var(--zinc-700);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        .capture-spinner.hidden { display: none; }

        .smile-text {
            font-size: 3.75rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: #fff;
            text-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
            display: none;
        }
        .smile-text.visible {
            display: block;
            animation: tada 1s ease-in-out forwards;
        }

        .processing-text {
            font-size: 1.875rem;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            color: #fff;
            text-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }
        .processing-text.hidden { display: none; }

        /* ─── PREVIEW SCREEN ─── */
        #screen-preview {
            background: #000;
        }
        #screen-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            animation: zoom-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        #screen-preview .gradient-overlay {
            position: absolute;
            inset: auto 0 0 0;
            height: 128px;
            background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);
        }

        /* ─── ERROR SCREEN ─── */
        #screen-error {
            background: rgba(127, 29, 29, 0.9);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            text-align: center;
            padding: 40px;
        }
        #screen-error svg {
            width: 80px;
            height: 80px;
            margin-bottom: 24px;
        }
        #screen-error .error-title {
            font-size: 1.875rem;
            font-weight: 700;
            margin-bottom: 8px;
        }
        #screen-error .error-msg {
            font-size: 1.25rem;
            opacity: 0.9;
        }
        #screen-error .error-hint {
            margin-top: 32px;
            font-size: 0.875rem;
            opacity: 0.75;
        }

        /* ─── Status Bar ─── */
        #status-bar {
            position: fixed;
            top: 0; left: 0; right: 0;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: none;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            font-size: 12px;
            color: var(--zinc-400);
        }
        #status-dot {
            display: inline-block;
            width: 8px; height: 8px;
            border-radius: 50%;
            background: #ef4444;
            margin-right: 6px;
            vertical-align: middle;
        }
        #status-dot.online { background: #22c55e; }

        /* ═══════════════════════════════════════ */
        /*              ANIMATIONS                */
        /* ═══════════════════════════════════════ */

        @keyframes spin { to { transform: rotate(360deg); } }

        @keyframes zoom-in {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes tada {
            from { transform: scale3d(1, 1, 1); }
            10%, 20% { transform: scale3d(0.9, 0.9, 0.9) rotate3d(0, 0, 1, -3deg); }
            30%, 50%, 70%, 90% { transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg); }
            40%, 60%, 80% { transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg); }
            to { transform: scale3d(1, 1, 1); }
        }

        /* 16 Random Processing Animations */
        @keyframes pulse-glow {
            0%, 100% { opacity: 1; text-shadow: 0 0 10px rgba(255,255,255,0.3); }
            50% { opacity: 0.6; text-shadow: 0 0 30px rgba(255,255,255,0.8); }
        }
        .anim-pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }
        .anim-float { animation: float 2s ease-in-out infinite; }

        @keyframes wiggle {
            0%, 100% { transform: rotate(0deg); }
            15% { transform: rotate(6deg); }
            30% { transform: rotate(-6deg); }
            45% { transform: rotate(4deg); }
            60% { transform: rotate(-4deg); }
            75% { transform: rotate(2deg); }
        }
        .anim-wiggle { animation: wiggle 1.5s ease-in-out infinite; }

        @keyframes bounce-in {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.08); }
            70% { transform: scale(0.95); }
            100% { transform: scale(1); opacity: 1; }
        }
        .anim-bounce-in { animation: bounce-in 0.8s ease-out forwards; }

        @keyframes slide-up {
            from { transform: translateY(40px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .anim-slide-up { animation: slide-up 0.6s ease-out forwards; }

        @keyframes slide-down {
            from { transform: translateY(-40px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .anim-slide-down { animation: slide-down 0.6s ease-out forwards; }

        @keyframes zoom-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }
        .anim-zoom-pulse { animation: zoom-pulse 1.8s ease-in-out infinite; }

        @keyframes swing {
            20% { transform: rotate(8deg); }
            40% { transform: rotate(-6deg); }
            60% { transform: rotate(4deg); }
            80% { transform: rotate(-2deg); }
            100% { transform: rotate(0deg); }
        }
        .anim-swing { animation: swing 1.5s ease-in-out infinite; transform-origin: top center; }

        @keyframes rubber {
            0% { transform: scaleX(1) scaleY(1); }
            30% { transform: scaleX(1.25) scaleY(0.75); }
            40% { transform: scaleX(0.75) scaleY(1.25); }
            50% { transform: scaleX(1.15) scaleY(0.85); }
            65% { transform: scaleX(0.95) scaleY(1.05); }
            75% { transform: scaleX(1.05) scaleY(0.95); }
            100% { transform: scaleX(1) scaleY(1); }
        }
        .anim-rubber { animation: rubber 1s ease-in-out infinite; }

        @keyframes jello {
            0%, 100% { transform: skewX(0) skewY(0); }
            30% { transform: skewX(-8deg) skewY(-8deg); }
            40% { transform: skewX(6deg) skewY(6deg); }
            50% { transform: skewX(-4deg) skewY(-4deg); }
            65% { transform: skewX(2deg) skewY(2deg); }
            75% { transform: skewX(-1deg) skewY(-1deg); }
        }
        .anim-jello { animation: jello 1.5s ease-in-out infinite; }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            14% { transform: scale(1.15); }
            28% { transform: scale(1); }
            42% { transform: scale(1.15); }
            70% { transform: scale(1); }
        }
        .anim-heartbeat { animation: heartbeat 1.5s ease-in-out infinite; }

        @keyframes flash {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.3; }
        }
        .anim-flash { animation: flash 2s ease-in-out infinite; }

        @keyframes shake-x {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-6px); }
            20%, 40%, 60%, 80% { transform: translateX(6px); }
        }
        .anim-shake-x { animation: shake-x 1.5s ease-in-out infinite; }

        @keyframes blur-in {
            from { filter: blur(12px); opacity: 0; }
            to { filter: blur(0); opacity: 1; }
        }
        .anim-blur-in { animation: blur-in 0.8s ease-out forwards; }

        @keyframes tracking-expand {
            from { letter-spacing: -0.1em; opacity: 0; }
            to { letter-spacing: 0.3em; opacity: 1; }
        }
        .anim-tracking-expand { animation: tracking-expand 0.8s ease-out forwards; }

        @keyframes wave {
            0%, 100% { transform: translateY(0) rotate(0); }
            25% { transform: translateY(-6px) rotate(2deg); }
            75% { transform: translateY(6px) rotate(-2deg); }
        }
        .anim-wave { animation: wave 2s ease-in-out infinite; }

        /* ─── Responsive ─── */
        @media (max-width: 480px) {
            #screen-idle .buzzer {
                width: 240px;
                height: 240px;
                border-width: 5px;
            }
            #screen-idle .buzzer svg {
                width: 96px;
                height: 96px;
            }
            #countdown-ring {
                width: 280px;
                height: 280px;
            }
            #countdown-number {
                font-size: 10rem;
            }
            .smile-text {
                font-size: 2.5rem;
            }
            .processing-text {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body>

    <!-- Status Bar -->
    <div id="status-bar">
        <span><span id="status-dot"></span> <span id="status-text">Verbinde...</span></span>
        <span id="status-state"></span>
    </div>

    <!-- IDLE -->
    <div id="screen-idle" class="screen active">
        <div class="buzzer-wrap" onclick="doTrigger()">
            <div class="buzzer">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z" />
                </svg>
            </div>
        </div>
    </div>

    <!-- COUNTDOWN -->
    <div id="screen-countdown" class="screen">
        <div class="countdown-container">
            <svg id="countdown-ring" viewBox="0 0 200 200">
                <circle class="ring-bg" cx="100" cy="100" r="90" fill="none" />
                <circle class="ring-fg" id="ring-progress" cx="100" cy="100" r="90"
                        fill="none" transform="rotate(-90 100 100)" />
            </svg>
            <span id="countdown-number">3</span>
        </div>
    </div>

    <!-- CAPTURING / PROCESSING -->
    <div id="screen-capturing" class="screen">
        <div class="capturing-content">
            <div id="capture-spinner" class="capture-spinner"></div>
            <p id="smile-text" class="smile-text">Bitte lächeln!</p>
            <p id="processing-text" class="processing-text">Vorschau wird geladen...</p>
        </div>
    </div>

    <!-- PREVIEW -->
    <div id="screen-preview" class="screen">
        <img id="preview-img" src="" alt="Foto">
        <div class="gradient-overlay"></div>
    </div>

    <!-- ERROR -->
    <div id="screen-error" class="screen">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <p class="error-title">Ups!</p>
        <p id="error-msg" class="error-msg">Ein Fehler ist aufgetreten</p>
        <p class="error-hint">Einen Moment warten...</p>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
